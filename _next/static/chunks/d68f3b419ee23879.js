(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,17452,83509,22911,e=>{"use strict";var r=e.i(43476);let t=(0,e.i(75254).default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var a=e.i(37727);function n({isOpen:e,onClose:n,onToggle:l,children:s,title:c="Settings"}){return(0,r.jsxs)(r.Fragment,{children:[!e&&(0,r.jsx)("button",{onClick:l,className:"fixed top-4 right-4 z-30 p-3 bg-surface-light dark:bg-gray-800 rounded-full shadow-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"Open settings",children:(0,r.jsx)(t,{size:24})}),e&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 z-30",onClick:n}),(0,r.jsx)("div",{className:`
          fixed top-0 right-0 h-full w-full sm:w-96 bg-surface-light dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 shadow-2xl z-40
          transition-transform duration-300 ease-in-out
          ${e?"translate-x-0":"translate-x-full"}
        `,children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-2 ml-12 lg:ml-0",children:[(0,r.jsx)(t,{size:24}),c]}),(0,r.jsx)("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors","aria-label":"Close settings",children:(0,r.jsx)(a.X,{size:24})})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:s})]})})]})}e.s(["default",()=>n],17452);var l=e.i(71645);function s(e){let{key:r,initialValue:t,validator:a}=e,n=(0,l.useCallback)(()=>{try{let e=window.localStorage.getItem(r);if(null===e)return t;let n=JSON.parse(e);if(a&&!a(n))return console.warn(`[useLocalStorage] Validation failed for key "${r}". Using initial value.`),t;return n}catch(e){return console.warn(`[useLocalStorage] Error reading localStorage key "${r}":`,e),t}},[r,t,a]),[s,c]=(0,l.useState)(t),o=(0,l.useCallback)(e=>{try{let t=e instanceof Function?e(s):e;c(t),window.localStorage.setItem(r,JSON.stringify(t))}catch(e){console.error(`[useLocalStorage] Error saving to localStorage key "${r}":`,e)}},[r,s]),i=(0,l.useCallback)(()=>{o(t)},[t,o]);return(0,l.useEffect)(()=>{c(n())},[]),[s,o,i]}function c(){let e=(0,l.useRef)(null),[r,t]=(0,l.useState)(!1),[a,n]=(0,l.useState)(!1);(0,l.useEffect)(()=>{n("wakeLock"in navigator)},[]);let s=(0,l.useCallback)(async()=>{if(!a)return void console.warn("Wake Lock API is not supported in this browser");try{if(e.current&&!e.current.released)return;e.current=await navigator.wakeLock.request("screen"),t(!0),e.current.addEventListener("release",()=>{t(!1)})}catch(e){console.error("Failed to request wake lock:",e),t(!1)}},[a]),c=(0,l.useCallback)(async()=>{if(e.current&&!e.current.released)try{await e.current.release(),e.current=null,t(!1)}catch(e){console.error("Failed to release wake lock:",e)}},[]);return(0,l.useEffect)(()=>{if(!a)return;let e=async()=>{"visible"===document.visibilityState&&r&&await s()};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[a,r,s]),(0,l.useEffect)(()=>()=>{e.current&&!e.current.released&&e.current.release().catch(console.error)},[]),{isActive:r,isSupported:a,request:s,release:c}}e.s(["useLocalStorage",()=>s],83509),e.s(["useWakeLock",()=>c],22911)},56357,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(18566),n=e.i(17452);function l({delayMs:e,isMirrored:a,isRunning:n,isMaximized:l,onToggleMaximize:s,onStatusChange:c,onError:o,onOpenSettings:i}){let u,d,g,h,f,m,p,b,y,v,x,w,k,j,S,M,C,N,R=(0,t.useRef)(null),{start:E,stop:L}=(u=(0,t.useRef)(null),d=(0,t.useRef)(null),g=(0,t.useRef)(null),h=(0,t.useRef)([]),f=(0,t.useRef)([]),m=(0,t.useRef)(!1),p=(0,t.useRef)(0),b=(0,t.useRef)(null),y=(0,t.useRef)(null),v=(0,t.useRef)(null),x=(0,t.useRef)(null),w=(0,t.useCallback)(()=>"ManagedMediaSource"in window?window.ManagedMediaSource:"u">typeof MediaSource?MediaSource:null,[]),k=(0,t.useCallback)(()=>{let e=w();if(!e)return null;for(let r of["video/webm;codecs=vp9","video/webm;codecs=vp8","video/webm"]){let t="u">typeof MediaRecorder&&MediaRecorder.isTypeSupported(r),a=e.isTypeSupported(r);if(t&&a)return console.warn(`Using codec: ${r}`),r}return null},[w]),j=(0,t.useCallback)(()=>{let e=g.current,r=d.current,t=R.current;if(!e||e.updating||m.current||0===f.current.length)return;let a=f.current.shift();a&&(m.current=!0,a.arrayBuffer().then(a=>{if(!e||!r||"open"!==r.readyState){m.current=!1;return}try{if(e.appendBuffer(a),t&&e.buffered.length>0){let a=p.current,n=t.currentTime,l=Math.max(0,n-(a/1e3+20));l>0&&e.buffered.start(0)<l&&e.addEventListener("updateend",function t(){if(e.removeEventListener("updateend",t),!e.updating&&"open"===r.readyState)try{e.remove(0,l)}catch(e){console.warn("Failed to remove old buffer data:",e)}})}}catch(e){console.error("Failed to append buffer:",e),m.current=!1}}).catch(e=>{console.error("Failed to convert chunk:",e),m.current=!1}))},[R]),S=(0,t.useCallback)(()=>{let e=Date.now(),r=p.current;for(;h.current.length>0;)if(e-h.current[0].timestamp>=r){let e=h.current.shift();e&&(f.current.push(e.data),f.current.length>100&&f.current.shift())}else break;j()},[j]),M=(0,t.useCallback)(async e=>{let r=e.getVideoTracks()[0];if(!r)return e;let t=r.getSettings(),a=t.width||1280,n=t.height||720,l=v.current;if(l){v.current=null;try{l.pause(),l.srcObject=null}catch{}}let s=document.createElement("canvas");s.width=a,s.height=n,y.current=s;let c=s.getContext("2d",{alpha:!1});if(!c)return e;let o=document.createElement("video");o.srcObject=e,o.muted=!0,o.playsInline=!0,await o.play(),await new Promise(e=>{let r=()=>{o.readyState>=o.HAVE_CURRENT_DATA?e():requestAnimationFrame(r)};r()}),v.current=o;let i=()=>{o.readyState>=o.HAVE_CURRENT_DATA&&(c.save(),c.scale(-1,1),c.drawImage(o,-a,0,a,n),c.restore()),x.current=requestAnimationFrame(i)};i();let u=s.captureStream(30);return e.getAudioTracks().forEach(e=>{u.addTrack(e)}),u},[]),C=(0,t.useCallback)((e,r,t)=>new Promise((a,n)=>{let l=w();if(!l)return void n(Error("MediaSource not available"));let s=new l;d.current=s,p.current=e;let c=URL.createObjectURL(s);console.warn("Created objectURL:",c),t.srcObject=null,t.src=c,t.play().catch(e=>{console.warn("Autoplay error:",e.message)}),console.warn("Set video.src to objectURL and called play()"),s.addEventListener("sourceopen",()=>{console.warn("MediaSource sourceopen event fired");try{let e=s.addSourceBuffer(r);e.mode="sequence",g.current=e,e.addEventListener("updateend",()=>{m.current=!1,j()}),e.addEventListener("error",e=>{console.error("SourceBuffer error:",e)}),"ManagedMediaSource"in window&&s.startStreaming?.(),console.warn("MediaSource setup complete"),a()}catch(e){n(e)}}),s.addEventListener("sourceended",()=>{console.warn("MediaSource ended")}),s.addEventListener("sourceclose",()=>{console.warn("MediaSource closed")})}),[w,j]),N=(0,t.useCallback)(async(e,r,t)=>{if(console.warn("MediaSourceRecorder.start called",{delayMs:r,isMirrored:t,hasVideoRef:!!R.current}),u.current?.state==="recording"&&(console.warn("Stopping existing MediaRecorder before starting new one"),u.current.stop(),u.current=null),d.current?.readyState==="open"){console.warn("Closing existing MediaSource before starting new one");try{d.current.endOfStream()}catch{}d.current=null}null!==x.current&&(cancelAnimationFrame(x.current),x.current=null),y.current&&(y.current=null),b.current=e;let a=t?await M(e):e;if(0===r){if(console.warn("Using direct stream (delay=0)"),R.current){try{R.current.pause()}catch{}R.current.srcObject=a,R.current.play().catch(e=>{"AbortError"!==e.name&&console.error("Failed to start video playback:",e)})}return}console.warn("Using MediaRecorder + MediaSource (delay>0)");let n=k();if(!n)throw Error("No supported codec found");if(console.warn("Using mimeType:",n),!R.current)throw Error("Video element not available");p.current=r,await C(r,n,R.current),console.warn("MediaSource setup complete"),h.current=[],f.current=[],m.current=!1;let l=new MediaRecorder(a,{mimeType:n});u.current=l,l.ondataavailable=e=>{if(e.data&&e.data.size>0){h.current.push({data:e.data,timestamp:Date.now()});let t=Math.ceil((r/1e3+20)/.25);h.current.length>t&&h.current.shift(),S()}},l.start(250),console.warn("MediaRecorder started")},[k,C,S,R,M]),{start:N,stop:(0,t.useCallback)(()=>{u.current?.state==="recording"&&u.current.stop(),d.current?.readyState==="open"&&d.current.endOfStream(),R.current&&(R.current.pause(),R.current.src="",R.current.srcObject=null),null!==x.current&&(cancelAnimationFrame(x.current),x.current=null),v.current&&(v.current.pause(),v.current.srcObject=null,v.current=null),y.current&&(y.current=null),b.current&&(b.current.getTracks().forEach(e=>e.stop()),b.current=null),u.current=null,d.current=null,g.current=null,h.current=[],f.current=[],m.current=!1},[R]),isSupported:(0,t.useCallback)(()=>!!w()&&null!==k(),[w,k])}),[F,T]=(0,t.useState)(null),[A,z]=(0,t.useState)({});return(0,t.useEffect)(()=>{if(!n||0===e)return void T(null);T(Math.ceil(e/1e3));let r=setInterval(()=>{T(e=>null===e||e<=1?(clearInterval(r),null):e-1)},1e3);return()=>{clearInterval(r),T(null)}},[n,e]),(0,t.useEffect)(()=>{let e=R.current;if(!e)return;let r=()=>{let{videoWidth:r,videoHeight:t}=e;if(r&&t){console.warn(`Video dimensions: ${r}x${t}`);let e=r/t;z(a=>({...a,aspectRatio:`${r} / ${t}`,maxWidth:"100%",maxHeight:"100%",width:e>1?"100%":"auto",height:e>1?"auto":"100%",WebkitTransformStyle:"preserve-3d",transformStyle:"preserve-3d"}))}};return e.addEventListener("loadedmetadata",r),()=>{e.removeEventListener("loadedmetadata",r)}},[]),(0,t.useEffect)(()=>{let e=R.current;if(!e)return;let r=()=>{let r=e.buffered;if(0===r.length)return;let t=e.currentTime,a=r.start(0),n=r.end(r.length-1);t<a?(console.warn(`Seek blocked: ${t}s < buffer start ${a}s`),e.currentTime=a):t>n&&(console.warn(`Seek blocked: ${t}s > buffer end ${n}s`),e.currentTime=n)};return e.addEventListener("seeking",r),()=>{e.removeEventListener("seeking",r)}},[]),(0,t.useEffect)(()=>{if(n)return(async()=>{try{R.current||await new Promise(e=>{let r=()=>{R.current?e():requestAnimationFrame(r)};r()}),c?.("Requesting camera access...");let r=await navigator.mediaDevices.getUserMedia({video:{width:1280,height:720},audio:!1});c?.(0===e?"Recording (live view)":`Recording (delay: ${e}ms) - MediaSource mode`),await E(r,e,a)}catch(r){let e=r instanceof Error?r.message:"Failed to start recording";console.error("MediaSourceVideo error:",r),o?.(r instanceof Error?r:Error(e))}})(),()=>{L()}},[n]),(0,r.jsxs)("div",{className:l?"fixed inset-0 z-[70] bg-black flex items-center justify-center":"relative bg-black rounded-lg overflow-hidden aspect-video shadow-2xl flex items-center justify-center",children:[(0,r.jsx)("video",{ref:R,autoPlay:!0,muted:!0,playsInline:!0,controls:!0,className:"w-full h-full object-contain",style:A}),null!==F&&(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[60] cursor-pointer",onClick:i,children:(0,r.jsx)("div",{className:"bg-black bg-opacity-75 rounded-2xl px-12 py-8",children:(0,r.jsx)("div",{className:"text-8xl font-bold text-white tabular-nums text-center",children:F})})}),l&&(0,r.jsx)("button",{onClick:s,className:"absolute top-4 right-4 p-2 bg-surface-light bg-opacity-90 dark:bg-gray-800 dark:bg-opacity-90 rounded-lg hover:bg-opacity-100 transition-opacity shadow-lg z-[70]",title:"Exit Fullscreen",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"})})}),n&&!l&&(0,r.jsx)("button",{onClick:s,className:"absolute top-4 right-4 p-2 bg-surface-light bg-opacity-90 dark:bg-gray-800 dark:bg-opacity-90 rounded-lg hover:bg-opacity-100 transition-opacity shadow-lg z-[30]",title:"Fullscreen",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})})})]})}function s({delayMs:e,isMirrored:a,isRunning:n,isMaximized:l,onToggleMaximize:s,onStatusChange:c,onError:o,onOpenSettings:i}){let u,d,g,h,f,m,p,b,y,v=(0,t.useRef)(null),x=(0,t.useRef)(null),{start:w,stop:k}=(u=(0,t.useRef)(null),d=(0,t.useRef)(null),g=(0,t.useRef)(null),h=(0,t.useRef)([]),f=(0,t.useRef)(null),m=(0,t.useRef)(0),p=(0,t.useRef)(!1),b=(0,t.useCallback)(()=>{let e=u.current,r=d.current;if(!e||!r||e.readyState<2)return;let t=r.getContext("2d",{willReadFrequently:!0});if(!t)return;t.drawImage(e,0,0,r.width,r.height);let a=t.getImageData(0,0,r.width,r.height);h.current.push({imageData:a,timestamp:Date.now()});let n=Math.ceil((m.current+15e3)/33);h.current.length>n&&h.current.shift()},[]),y=(0,t.useCallback)(()=>{let e=()=>{if(!p.current)return;let r=Date.now(),t=m.current,a=v.current;if(!a){f.current=requestAnimationFrame(e);return}let n=a.getContext("2d");if(!n){f.current=requestAnimationFrame(e);return}let l=null,s=-1;for(let e=0;e<h.current.length;e++)if(r-h.current[e].timestamp>=t)l=h.current[e],s=e;else break;l&&(n.putImageData(l.imageData,0,0),s>0&&h.current.splice(0,s)),f.current=requestAnimationFrame(e)};e()},[v]),{start:(0,t.useCallback)((e,r)=>{console.warn("CanvasRecorder.start called",{delayMs:r,hasCanvasRef:!!v.current}),m.current=r,p.current=!0;let t=document.createElement("video");t.srcObject=e,t.autoplay=!0,t.muted=!0,t.playsInline=!0,u.current=t;let a=document.createElement("canvas");d.current=a,t.onloadedmetadata=()=>{console.warn("Source video metadata loaded",{width:t.videoWidth,height:t.videoHeight}),a.width=t.videoWidth||1280,a.height=t.videoHeight||720,v.current?(v.current.width=a.width,v.current.height=a.height,console.warn("Display canvas dimensions set")):console.error("canvasRef.current is null!"),t.play().then(()=>{h.current=[],g.current=window.setInterval(()=>{b()},33),y()})}},[b,y,v]),stop:(0,t.useCallback)(()=>{if(p.current=!1,null!==g.current&&(clearInterval(g.current),g.current=null),null!==f.current&&(cancelAnimationFrame(f.current),f.current=null),u.current){let e=u.current.srcObject;e&&e.getTracks().forEach(e=>e.stop()),u.current.srcObject=null,u.current=null}d.current=null,h.current=[]},[])}),[j,S]=(0,t.useState)(null);return(0,t.useEffect)(()=>{if(!n||0===e)return void S(null);S(Math.ceil(e/1e3));let r=setInterval(()=>{S(e=>null===e||e<=1?(clearInterval(r),null):e-1)},1e3);return()=>{clearInterval(r),S(null)}},[n,e]),(0,t.useEffect)(()=>{if(n)return(async()=>{try{v.current||await new Promise(e=>{let r=()=>{v.current?e():requestAnimationFrame(r)};r()}),c?.("Requesting camera access...");let r=await navigator.mediaDevices.getUserMedia({video:{width:1280,height:720},audio:!1});x.current=r,c?.(`Recording (delay: ${e}ms) - Canvas mode`),w(r,e)}catch(r){let e=r instanceof Error?r.message:"Failed to start recording";console.error("CanvasDisplay error:",r),o?.(r instanceof Error?r:Error(e))}})(),()=>{k(),x.current&&(x.current.getTracks().forEach(e=>e.stop()),x.current=null)}},[n]),(0,r.jsxs)("div",{className:l?"fixed inset-0 z-[70] bg-black":"relative bg-black rounded-lg overflow-hidden aspect-video shadow-2xl",children:[(0,r.jsx)("canvas",{ref:v,className:"w-full h-full object-contain",style:{transform:a?"scaleX(-1)":"none"}}),null!==j&&(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[60] cursor-pointer",onClick:i,children:(0,r.jsx)("div",{className:"bg-black bg-opacity-75 rounded-2xl px-12 py-8",children:(0,r.jsx)("div",{className:"text-8xl font-bold text-white tabular-nums text-center",children:j})})}),l&&(0,r.jsx)("button",{onClick:s,className:"absolute top-4 right-4 p-2 bg-surface-light bg-opacity-90 dark:bg-gray-800 dark:bg-opacity-90 rounded-lg hover:bg-opacity-100 transition-opacity shadow-lg z-[70]",title:"Exit Fullscreen",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"})})}),n&&!l&&(0,r.jsx)("button",{onClick:s,className:"absolute top-4 right-4 p-2 bg-surface-light bg-opacity-90 dark:bg-gray-800 dark:bg-opacity-90 rounded-lg hover:bg-opacity-100 transition-opacity shadow-lg z-[30]",title:"Fullscreen",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})})})]})}l.displayName="MediaSourceVideo",s.displayName="CanvasDisplay";var c=e.i(83509),o=e.i(22911);function i(e){return"object"==typeof e&&null!==e&&!(!("delaySec"in e)||"number"!=typeof e.delaySec||isNaN(e.delaySec))&&"isMirrored"in e&&"boolean"==typeof e.isMirrored&&!(e.delaySec<0)&&!(e.delaySec>180)}let u={delaySec:.5,isMirrored:!1};function d(){let e,d,g=(0,a.useSearchParams)().get("mode"),[h,f]=(0,c.useLocalStorage)({key:"mirror-settings",initialValue:u,validator:i}),[m,p]=(0,t.useState)(!1),[b,y]=(0,t.useState)(!1),[v,x]=(0,t.useState)(""),[w,k]=(0,t.useState)(null),[j,S]=(0,t.useState)(0),[M,C]=(0,t.useState)(!0),N=(0,o.useWakeLock)(),{getSupportedMode:R}=(e=(0,t.useCallback)(e=>{for(let r of["video/webm;codecs=vp9","video/webm;codecs=vp8","video/webm"]){let t="u">typeof MediaRecorder&&MediaRecorder.isTypeSupported(r),a=e.isTypeSupported(r);if(t&&a)return console.warn(`Found supported codec: ${r}`),r}return console.warn("No supported codec found"),null},[]),d=(0,t.useCallback)(()=>{if("ManagedMediaSource"in window)return console.warn("ManagedMediaSource detected - forcing canvas mode (Safari cannot play WebM)"),!1;if("u">typeof MediaSource){let r=e(MediaSource);return console.warn("MediaSource support check:",{mimeType:r,supported:null!==r}),null!==r}return console.warn("MediaSource not available"),!1},[e]),{getSupportedMode:(0,t.useCallback)(e=>0===e||d()?"mediasource":"canvas",[d])}),E=h.delaySec,L=h.isMirrored,F=(0,t.useCallback)(e=>{f(r=>({...r,delaySec:e}))},[f]),T=(0,t.useCallback)(e=>{f(r=>({...r,isMirrored:e}))},[f]),A=async()=>{let e=Math.round(1e3*E),r=g||R(e);S(e),k(r),y(!0),C(!1),await N.request()},z=async()=>{y(!1),k(null),p(!1),x(""),C(!0),await N.release()},O=e=>{x(e)},I=e=>{x(`Error: ${e.message}`),y(!1)},$=()=>{p(!m)},D=()=>{C(!M)},U=()=>{z(),C(!0)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.default,{isOpen:M,onClose:()=>{C(!1)},onToggle:D,title:"Mirror Settings",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[!b&&(0,r.jsx)("button",{type:"button",onClick:A,className:"w-full px-4 py-3 bg-primary text-white rounded-lg hover:bg-primary-hover transition-colors font-medium",children:"Start"}),b&&(0,r.jsx)("button",{type:"button",onClick:z,className:"w-full px-4 py-3 bg-danger text-white rounded-lg hover:bg-danger-hover transition-colors font-medium",children:"Stop"})]}),(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:L,onChange:e=>T(e.target.checked),disabled:b,className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary disabled:opacity-50"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Mirror (Flip Horizontally)"})]})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"delay",className:"block text-sm font-medium",children:"Delay Time"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*\\.?[0-9]*",id:"delay",value:E,onChange:e=>{let r=e.target.value;if(""===r)return void F(0);if(!/^[0-9]*\.?[0-9]*$/.test(r))return;let t=parseFloat(r);!isNaN(t)&&t>=0&&t<=180&&F(t)},onBlur:e=>{""===e.target.value&&F(0)},disabled:b,className:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-surface-light dark:bg-gray-700 disabled:opacity-50",placeholder:"0"}),(0,r.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"sec"})]}),(0,r.jsx)("input",{type:"range",id:"delay-range",min:"0",max:"180",step:"0.5",value:E,onChange:e=>F(parseFloat(e.target.value)),disabled:b,className:"w-full accent-primary-light dark:accent-primary-dark disabled:opacity-50"}),(0,r.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[(0,r.jsx)("span",{children:"0s"}),(0,r.jsx)("span",{children:"30s"}),(0,r.jsx)("span",{children:"60s"}),(0,r.jsx)("span",{children:"90s"}),(0,r.jsx)("span",{children:"120s"}),(0,r.jsx)("span",{children:"150s"}),(0,r.jsx)("span",{children:"180s"})]})]}),g&&(0,r.jsx)("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:(0,r.jsxs)("p",{className:"text-sm text-yellow-800 dark:text-yellow-200 font-medium",children:["Force mode: ",g]})}),v&&(0,r.jsx)("div",{className:"p-3 bg-gray-100 dark:bg-gray-700 rounded-lg",children:(0,r.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:v})})]})}),(0,r.jsx)("main",{className:"min-h-screen flex flex-col items-center justify-center p-4 pt-20 lg:pt-4",children:(0,r.jsxs)("div",{className:"w-full max-w-6xl space-y-4",children:["mediasource"===w&&(0,r.jsx)(l,{delayMs:j,isMirrored:L,isRunning:b,isMaximized:m,onToggleMaximize:$,onStatusChange:O,onError:I,onOpenSettings:U}),"canvas"===w&&(0,r.jsx)(s,{delayMs:j,isMirrored:L,isRunning:b,isMaximized:m,onToggleMaximize:$,onStatusChange:O,onError:I,onOpenSettings:U}),!w&&(0,r.jsxs)("div",{onClick:D,className:"relative bg-black rounded-lg overflow-hidden aspect-video shadow-2xl flex flex-col items-center justify-center cursor-pointer hover:bg-gray-900 transition-colors",children:[(0,r.jsx)("h1",{className:"text-white text-5xl font-bold mb-4",children:"Mirror"}),(0,r.jsx)("p",{className:"text-white text-lg",children:"Press Start to begin"})]})]})})]})}function g(){return(0,r.jsx)(t.Suspense,{fallback:(0,r.jsx)("div",{children:"Loading..."}),children:(0,r.jsx)(d,{})})}e.s(["default",()=>g],56357)}]);