(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,17452,83509,e=>{"use strict";var a=e.i(43476);let r=(0,e.i(75254).default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var t=e.i(37727);function l({isOpen:e,onClose:l,onToggle:s,children:n,title:i="Settings"}){return(0,a.jsxs)(a.Fragment,{children:[!e&&(0,a.jsx)("button",{onClick:s,className:"fixed top-4 right-4 z-30 p-3 bg-surface-light dark:bg-gray-800 rounded-full shadow-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"Open settings",children:(0,a.jsx)(r,{size:24})}),e&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-30",onClick:l}),(0,a.jsx)("div",{className:`
          fixed top-0 right-0 h-full w-full sm:w-96 bg-surface-light dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 shadow-2xl z-40
          transition-transform duration-300 ease-in-out
          ${e?"translate-x-0":"translate-x-full"}
        `,children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-2 ml-12 lg:ml-0",children:[(0,a.jsx)(r,{size:24}),i]}),(0,a.jsx)("button",{onClick:l,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors","aria-label":"Close settings",children:(0,a.jsx)(t.X,{size:24})})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:n})]})})]})}e.s(["default",()=>l],17452);var s=e.i(71645);function n(e){let{key:a,initialValue:r,validator:t}=e,l=(0,s.useCallback)(()=>{try{let e=window.localStorage.getItem(a);if(null===e)return r;let l=JSON.parse(e);if(t&&!t(l))return console.warn(`[useLocalStorage] Validation failed for key "${a}". Using initial value.`),r;return l}catch(e){return console.warn(`[useLocalStorage] Error reading localStorage key "${a}":`,e),r}},[a,r,t]),[n,i]=(0,s.useState)(r),c=(0,s.useCallback)(e=>{try{let r=e instanceof Function?e(n):e;i(r),window.localStorage.setItem(a,JSON.stringify(r))}catch(e){console.error(`[useLocalStorage] Error saving to localStorage key "${a}":`,e)}},[a,n]),o=(0,s.useCallback)(()=>{c(r)},[r,c]);return(0,s.useEffect)(()=>{i(l())},[]),[n,c,o]}e.s(["useLocalStorage",()=>n],83509)},90417,e=>{"use strict";var a=e.i(43476),r=e.i(71645),t=e.i(17452),l=e.i(83509);function s(e){return"object"==typeof e&&null!==e&&!("waitSec"in e&&("number"!=typeof e.waitSec||isNaN(e.waitSec))||"isWaitEnabled"in e&&"boolean"!=typeof e.isWaitEnabled||"isLoop"in e&&"boolean"!=typeof e.isLoop||!("intervalSec"in e)||"number"!=typeof e.intervalSec||isNaN(e.intervalSec)||!("fromSec"in e)||null!==e.fromSec&&("number"!=typeof e.fromSec||isNaN(e.fromSec))||!("toSec"in e)||null!==e.toSec&&("number"!=typeof e.toSec||isNaN(e.toSec))||"isRangeEnabled"in e&&"boolean"!=typeof e.isRangeEnabled||!("playbackRate"in e)||"number"!=typeof e.playbackRate||isNaN(e.playbackRate))&&(!("isPlaybackRateEnabled"in e)||"boolean"==typeof e.isPlaybackRateEnabled)&&("number"!=typeof e.waitSec||!(e.waitSec<0)&&!(e.waitSec>60))&&!(e.intervalSec<0)&&!(e.intervalSec>60)&&(null===e.fromSec||!(e.fromSec<0))&&(null===e.toSec||!(e.toSec<0))&&!(e.playbackRate<.25)&&!(e.playbackRate>2)&&!0}let n={waitSec:5,isWaitEnabled:!1,isLoop:!1,intervalSec:5,fromSec:null,toSec:null,isRangeEnabled:!1,playbackRate:1,isPlaybackRateEnabled:!1};function i({count:e,isVisible:r,onClick:t}){return!r||e<=0?null:(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[60] cursor-pointer",onClick:t,children:(0,a.jsx)("div",{className:"bg-black bg-opacity-75 rounded-2xl px-12 py-8",children:(0,a.jsx)("div",{className:"text-8xl font-bold text-white tabular-nums text-center",children:e})})})}let c=(0,r.forwardRef)(({isLoaded:e},r)=>(0,a.jsx)("div",{className:"w-full max-w-3xl mx-auto",style:{display:e?"block":"none"},children:(0,a.jsx)("audio",{ref:r,controls:!0,className:"w-full"})}));function o(){let[e,o]=(0,l.useLocalStorage)({key:"player-settings",initialValue:n,validator:s}),d=(0,r.useMemo)(()=>({...n,...e}),[e]),u=(0,r.useCallback)(e=>{o("function"==typeof e?e(d):e)},[o,d]),[m,g]=(0,r.useState)(!1),[x,p]=(0,r.useState)(""),f=(0,r.useRef)(null),b=(0,r.useRef)(null),[y,h]=(0,r.useState)(!0),k=d.waitSec,v=d.isWaitEnabled,j=d.isLoop,N=d.intervalSec,S=d.fromSec,w=d.toSec,C=d.isRangeEnabled,E=d.playbackRate,R=d.isPlaybackRateEnabled,L=v?k:0,P=C?S:null,T=C?w:null,F=R?E:1,[M,z]=(0,r.useState)(String(k)),[A,B]=(0,r.useState)(String(N)),[O,W]=(0,r.useState)(null!==S?String(S):""),[U,$]=(0,r.useState)(null!==w?String(w):""),[I,V]=(0,r.useState)(String(E));(0,r.useEffect)(()=>{z(String(k))},[k]),(0,r.useEffect)(()=>{B(String(N))},[N]),(0,r.useEffect)(()=>{W(null!==S?String(S):"")},[S]),(0,r.useEffect)(()=>{$(null!==w?String(w):"")},[w]),(0,r.useEffect)(()=>{V(String(E))},[E]);let J=(0,r.useRef)(m),K=(0,r.useRef)(k),D=(0,r.useRef)(j),X=(0,r.useRef)(N),q=(0,r.useRef)(S);(0,r.useEffect)(()=>{J.current=m},[m]),(0,r.useEffect)(()=>{K.current=L},[L]),(0,r.useEffect)(()=>{D.current=j},[j]),(0,r.useEffect)(()=>{X.current=N},[N]),(0,r.useEffect)(()=>{q.current=P},[P]);let{count:G,isCountingDown:H,startCountdown:Q,cancelCountdown:Y}=function(){let[e,a]=(0,r.useState)(0),[t,l]=(0,r.useState)(!1),s=(0,r.useRef)(null),n=(0,r.useRef)(null);(0,r.useEffect)(()=>()=>{s.current&&clearTimeout(s.current)},[]);let i=(0,r.useCallback)(()=>{s.current&&(clearTimeout(s.current),s.current=null),l(!1),a(0),n.current&&(n.current(),n.current=null)},[]);return{count:e,isCountingDown:t,startCountdown:(0,r.useCallback)(e=>e<=0?Promise.resolve():new Promise(r=>{l(!0),n.current=r;let t=Math.floor(e),i=()=>{if(a(t),t<=1){s.current=setTimeout(()=>{l(!1),a(0),n.current=null,r()},1e3);return}t--,s.current=setTimeout(i,1e3)};i()}),[]),cancelCountdown:i}}(),Z=function(e){let{audioRef:a,fromSec:t,toSec:l,playbackRate:s,onEnd:n,onError:i}=e,[c,o]=(0,r.useState)(0),[d,u]=(0,r.useState)(0),[m,g]=(0,r.useState)(!1),[x,p]=(0,r.useState)(!1);(0,r.useEffect)(()=>{a.current&&(a.current.playbackRate=s)},[s,a]);let f=(0,r.useCallback)(()=>{if(!a.current)return;let e=a.current.currentTime;if(o(e),null!==t&&t>0&&e<t){a.current.currentTime=t;return}null!==l&&l>0&&e>=l&&(a.current.pause(),g(!1),n&&n())},[t,l,n,a]),b=(0,r.useCallback)(()=>{g(!1),n&&n()},[n]),y=(0,r.useCallback)(()=>{a.current&&(u(a.current.duration),p(!0))},[a]),h=(0,r.useCallback)(()=>{i&&i(Error("Failed to load audio file"))},[i]);(0,r.useEffect)(()=>{let e=a.current;if(e)return e.addEventListener("timeupdate",f),e.addEventListener("ended",b),e.addEventListener("loadedmetadata",y),e.addEventListener("error",h),()=>{e.removeEventListener("timeupdate",f),e.removeEventListener("ended",b),e.removeEventListener("loadedmetadata",y),e.removeEventListener("error",h)}},[f,b,y,h,a]);let k=(0,r.useCallback)(e=>{if(!a.current)return;if(!e.type.startsWith("audio/")){i&&i(Error("Please select an audio file"));return}let r=URL.createObjectURL(e);a.current.src=r,a.current.load()},[i,a]),v=(0,r.useCallback)(()=>{a.current&&x&&(a.current.play().catch(e=>{i&&i(e)}),g(!0))},[x,i,a]);return{currentTime:c,duration:d,isPlaying:m,isLoaded:x,loadAudioFile:k,play:v,pause:(0,r.useCallback)(()=>{a.current&&(a.current.pause(),g(!1))},[a]),reset:(0,r.useCallback)(()=>{if(!a.current)return;let e=null!==t&&t>0?t:0;a.current.currentTime=e,o(e)},[t,a])}}({audioRef:b,fromSec:P,toSec:T,playbackRate:F,onEnd:async()=>{if(J.current){if(!D.current)return void g(!1);if(await Q(X.current),J.current&&b.current){let e=null!==q.current&&q.current>0?q.current:0;b.current.currentTime=e,b.current.play()}}},onError:e=>{p(`Error: ${e.message}`),g(!1)}}),_=(0,r.useCallback)(e=>{u(a=>({...a,waitSec:e}))},[u]),ee=(0,r.useCallback)(e=>{u(a=>({...a,isWaitEnabled:e}))},[u]),ea=(0,r.useCallback)(e=>{u(a=>({...a,isLoop:e}))},[u]),er=(0,r.useCallback)(e=>{u(a=>({...a,intervalSec:e}))},[u]),et=(0,r.useCallback)(e=>{u(a=>({...a,fromSec:e}))},[u]),el=(0,r.useCallback)(e=>{u(a=>({...a,toSec:e}))},[u]),es=(0,r.useCallback)(e=>{u(a=>({...a,playbackRate:e}))},[u]),en=(0,r.useCallback)(e=>{u(a=>({...a,isRangeEnabled:e}))},[u]),ei=(0,r.useCallback)(e=>{u(a=>({...a,isPlaybackRateEnabled:e}))},[u]),ec=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),u(e=>({...e,fromSec:null,toSec:null}))},[u]),eo=async()=>{Z.isLoaded?(g(!0),h(!1),p("Playing..."),await Q(K.current),J.current&&(Z.reset(),Z.play())):p("Please select an audio file first")},ed=()=>{h(!y)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.default,{isOpen:y,onClose:()=>{h(!1)},onToggle:ed,title:"Player Settings",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[!m&&(0,a.jsx)("button",{type:"button",onClick:eo,disabled:!Z.isLoaded,className:"w-full px-4 py-3 bg-primary text-white rounded-lg hover:bg-primary-hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:"Start"}),m&&(0,a.jsx)("button",{type:"button",onClick:()=>{g(!1),Z.pause(),Z.reset(),Y(),p(""),h(!0)},className:"w-full px-4 py-3 bg-danger text-white rounded-lg hover:bg-danger-hover transition-colors font-medium",children:"Stop"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"file",className:"block text-sm font-medium",children:"Audio File"}),(0,a.jsx)("input",{ref:f,type:"file",id:"file",onChange:e=>{let a=e.target.files?.[0];a&&(Z.loadAudioFile(a),p("Audio file loaded"))},disabled:m,className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-surface-light dark:bg-gray-700 disabled:opacity-50 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-primary file:text-white hover:file:bg-primary-hover"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:v,onChange:e=>ee(e.target.checked),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Wait"})]}),v&&(0,a.jsxs)("div",{className:"flex items-center gap-2 ml-6",children:[(0,a.jsx)("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*\\.?[0-9]*",id:"wait",value:M,onChange:e=>{z(e.target.value)},onBlur:()=>{let e=parseFloat(M);""===M||isNaN(e)||e<0||e>60?_(0):_(e)},className:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-surface-light dark:bg-gray-700",placeholder:"0"}),(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"sec"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:j,onChange:e=>ea(e.target.checked),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Loop"})]}),j&&(0,a.jsxs)("div",{className:"ml-6",children:[(0,a.jsx)("label",{htmlFor:"interval",className:"block text-sm font-medium mb-2",children:"Interval"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*\\.?[0-9]*",id:"interval",value:A,onChange:e=>{B(e.target.value)},onBlur:()=>{let e=parseFloat(A);""===A||isNaN(e)||e<0||e>60?er(0):er(e)},className:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-surface-light dark:bg-gray-700",placeholder:"0"}),(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"sec"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:C,onChange:e=>en(e.target.checked),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Range"})]}),C&&(0,a.jsxs)("div",{className:"ml-6 space-y-2",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(null!==S||null!==w)&&(0,a.jsx)("button",{type:"button",onClick:ec,className:"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 underline transition-colors ml-auto",children:"Reset"})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{htmlFor:"from",className:"block text-xs text-gray-600 dark:text-gray-400",children:"From"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*\\.?[0-9]*",id:"from",value:O,onChange:e=>{W(e.target.value)},onBlur:()=>{if(""===O)et(null);else{let e=parseFloat(O);isNaN(e)||e<0?et(null):et(e)}},placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-surface-light dark:bg-gray-700"}),(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"s"})]}),Z.isLoaded&&(0,a.jsxs)("button",{type:"button",onClick:()=>et(Math.floor(10*Z.currentTime)/10),className:"w-full px-2 py-1 text-xs bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:["Set Current (",Math.floor(10*Z.currentTime)/10,"s)"]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{htmlFor:"to",className:"block text-xs text-gray-600 dark:text-gray-400",children:"To"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*\\.?[0-9]*",id:"to",value:U,onChange:e=>{$(e.target.value)},onBlur:()=>{if(""===U)el(null);else{let e=parseFloat(U);isNaN(e)||e<0?el(null):el(e)}},placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-surface-light dark:bg-gray-700"}),(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"s"})]}),Z.isLoaded&&(0,a.jsxs)("button",{type:"button",onClick:()=>el(Math.floor(10*Z.currentTime)/10),className:"w-full px-2 py-1 text-xs bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:["Set Current (",Math.floor(10*Z.currentTime)/10,"s)"]})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:R,onChange:e=>ei(e.target.checked),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Playback Rate"})]}),R&&(0,a.jsxs)("div",{className:"ml-6 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*\\.?[0-9]*",id:"rate",value:I,onChange:e=>{V(e.target.value)},onBlur:()=>{let e=parseFloat(I);""===I||isNaN(e)||e<.25||e>2?es(1):es(e)},className:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-surface-light dark:bg-gray-700",placeholder:"1.0"}),(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"×"})]}),(0,a.jsx)("input",{type:"range",id:"rate-range",min:"0.25",max:"2.0",step:"0.05",value:E,onChange:e=>es(parseFloat(e.target.value)),className:"w-full accent-primary-light dark:accent-primary-dark"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("span",{children:"0.25×"}),(0,a.jsx)("span",{children:"0.5×"}),(0,a.jsx)("span",{children:"1.0×"}),(0,a.jsx)("span",{children:"1.5×"}),(0,a.jsx)("span",{children:"2.0×"})]})]})]}),x&&(0,a.jsx)("div",{className:"p-3 bg-gray-100 dark:bg-gray-700 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:x})})]})}),(0,a.jsxs)("main",{className:"min-h-screen flex flex-col items-center justify-center p-4 pt-20 lg:pt-4",children:[(0,a.jsxs)("div",{className:"w-full max-w-6xl space-y-4",children:[(0,a.jsx)(c,{ref:b,isLoaded:Z.isLoaded}),!Z.isLoaded&&(0,a.jsxs)("div",{onClick:ed,className:"relative bg-black rounded-lg overflow-hidden aspect-video shadow-2xl flex flex-col items-center justify-center cursor-pointer hover:bg-gray-900 transition-colors",children:[(0,a.jsx)("h1",{className:"text-white text-5xl font-bold mb-4",children:"Player"}),(0,a.jsx)("p",{className:"text-white text-lg",children:"Press Start to begin"})]})]}),(0,a.jsx)(i,{count:G,isVisible:H,onClick:()=>{Y(),g(!1),Z.pause(),Z.reset(),h(!0)}})]})]})}function d(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:(0,a.jsx)(o,{})})}c.displayName="AudioPlayer",e.s(["default",()=>d],90417)}]);