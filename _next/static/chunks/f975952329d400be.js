(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,17452,83509,22911,e=>{"use strict";var r=e.i(43476);let t=(0,e.i(75254).default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var a=e.i(37727);function l({isOpen:e,onClose:l,onToggle:s,children:n,title:i="Settings"}){return(0,r.jsxs)(r.Fragment,{children:[!e&&(0,r.jsx)("button",{onClick:s,className:"fixed top-4 right-4 z-30 p-3 bg-surface-light dark:bg-gray-800 rounded-full shadow-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"Open settings",children:(0,r.jsx)(t,{size:24})}),e&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 z-30",onClick:l}),(0,r.jsx)("div",{className:`
          fixed top-0 right-0 h-full w-full sm:w-96 bg-surface-light dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 shadow-2xl z-40
          transition-transform duration-300 ease-in-out
          ${e?"translate-x-0":"translate-x-full"}
        `,children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-2 ml-12 lg:ml-0",children:[(0,r.jsx)(t,{size:24}),i]}),(0,r.jsx)("button",{onClick:l,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors","aria-label":"Close settings",children:(0,r.jsx)(a.X,{size:24})})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:n})]})})]})}e.s(["default",()=>l],17452);var s=e.i(71645);function n(e){let{key:r,initialValue:t,validator:a}=e,l=(0,s.useCallback)(()=>{try{let e=window.localStorage.getItem(r);if(null===e)return t;let l=JSON.parse(e);if(a&&!a(l))return console.warn(`[useLocalStorage] Validation failed for key "${r}". Using initial value.`),t;return l}catch(e){return console.warn(`[useLocalStorage] Error reading localStorage key "${r}":`,e),t}},[r,t,a]),[n,i]=(0,s.useState)(t),o=(0,s.useCallback)(e=>{try{let t=e instanceof Function?e(n):e;i(t),window.localStorage.setItem(r,JSON.stringify(t))}catch(e){console.error(`[useLocalStorage] Error saving to localStorage key "${r}":`,e)}},[r,n]),c=(0,s.useCallback)(()=>{o(t)},[t,o]);return(0,s.useEffect)(()=>{i(l())},[]),[n,o,c]}function i(){let e=(0,s.useRef)(null),[r,t]=(0,s.useState)(!1),[a,l]=(0,s.useState)(!1);(0,s.useEffect)(()=>{l("wakeLock"in navigator)},[]);let n=(0,s.useCallback)(async()=>{if(!a)return void console.warn("Wake Lock API is not supported in this browser");try{if(e.current&&!e.current.released)return;e.current=await navigator.wakeLock.request("screen"),t(!0),e.current.addEventListener("release",()=>{t(!1)})}catch(e){console.error("Failed to request wake lock:",e),t(!1)}},[a]),i=(0,s.useCallback)(async()=>{if(e.current&&!e.current.released)try{await e.current.release(),e.current=null,t(!1)}catch(e){console.error("Failed to release wake lock:",e)}},[]);return(0,s.useEffect)(()=>{if(!a)return;let e=async()=>{"visible"===document.visibilityState&&r&&await n()};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[a,r,n]),(0,s.useEffect)(()=>()=>{e.current&&!e.current.released&&e.current.release().catch(console.error)},[]),{isActive:r,isSupported:a,request:n,release:i}}e.s(["useLocalStorage",()=>n],83509),e.s(["useWakeLock",()=>i],22911)},90417,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(17452),l=e.i(83509),s=e.i(22911);function n(e){return"object"==typeof e&&null!==e&&!("waitSec"in e&&("number"!=typeof e.waitSec||isNaN(e.waitSec))||"isWaitEnabled"in e&&"boolean"!=typeof e.isWaitEnabled||"isLoop"in e&&"boolean"!=typeof e.isLoop||!("intervalSec"in e)||"number"!=typeof e.intervalSec||isNaN(e.intervalSec)||!("fromSec"in e)||null!==e.fromSec&&("number"!=typeof e.fromSec||isNaN(e.fromSec))||!("toSec"in e)||null!==e.toSec&&("number"!=typeof e.toSec||isNaN(e.toSec))||"isRangeEnabled"in e&&"boolean"!=typeof e.isRangeEnabled||!("playbackRate"in e)||"number"!=typeof e.playbackRate||isNaN(e.playbackRate))&&(!("isPlaybackRateEnabled"in e)||"boolean"==typeof e.isPlaybackRateEnabled)&&(!("isMirrored"in e)||"boolean"==typeof e.isMirrored)&&(!("youtubeUrl"in e)||"string"==typeof e.youtubeUrl)&&("number"!=typeof e.waitSec||!(e.waitSec<0)&&!(e.waitSec>60))&&!(e.intervalSec<0)&&!(e.intervalSec>60)&&(null===e.fromSec||!(e.fromSec<0))&&(null===e.toSec||!(e.toSec<0))&&!(e.playbackRate<.25)&&!(e.playbackRate>2)&&!0}let i={waitSec:5,isWaitEnabled:!1,isLoop:!1,intervalSec:5,fromSec:null,toSec:null,isRangeEnabled:!1,playbackRate:1,isPlaybackRateEnabled:!1,isMirrored:!1,youtubeUrl:""};function o(){return new Promise(e=>{if(window.YT&&window.YT.Player)return void e();if(window.onYouTubeIframeAPIReady=()=>{e()},document.querySelector('script[src="https://www.youtube.com/iframe_api"]'))return;let r=document.createElement("script");r.src="https://www.youtube.com/iframe_api";let t=document.getElementsByTagName("script")[0];t.parentNode?.insertBefore(r,t)})}function c({count:e,isVisible:t,onClick:a}){return!t||e<=0?null:(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[60] cursor-pointer",onClick:a,children:(0,r.jsx)("div",{className:"bg-black bg-opacity-75 rounded-2xl px-12 py-8",children:(0,r.jsx)("div",{className:"text-8xl font-bold text-white tabular-nums text-center",children:e})})})}let u=(0,t.forwardRef)(({isLoaded:e,loop:t=!1},a)=>(0,r.jsx)("div",{className:"w-full max-w-3xl mx-auto",style:{display:e?"block":"none"},children:(0,r.jsx)("audio",{ref:a,controls:!0,className:"w-full",loop:t})}));u.displayName="AudioPlayer";let d=(0,t.forwardRef)(({isLoaded:e,loop:a=!1,isMirrored:l=!1},s)=>{let[n,i]=(0,t.useState)(!1),o=()=>{i(!n)};return(0,r.jsx)("div",{className:n?"fixed inset-0 z-[70] bg-black flex items-center justify-center":"w-full max-w-6xl mx-auto",style:{display:e?n?"flex":"block":"none"},children:(0,r.jsxs)("div",{className:n?"w-full h-full flex items-center justify-center relative":"relative bg-black rounded-lg overflow-hidden aspect-video shadow-2xl flex items-center justify-center",children:[(0,r.jsx)("video",{ref:s,controls:!0,className:"w-full h-full object-contain",loop:a,playsInline:!0,style:l?{transform:"scaleX(-1)"}:void 0}),n&&(0,r.jsx)("button",{onClick:o,className:"absolute top-4 right-4 p-2 bg-surface-light bg-opacity-90 dark:bg-gray-800 dark:bg-opacity-90 rounded-lg hover:bg-opacity-100 transition-opacity shadow-lg z-[70]",title:"Exit Fullscreen",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"})})}),e&&!n&&(0,r.jsx)("button",{onClick:o,className:"absolute top-4 right-4 p-2 bg-surface-light bg-opacity-90 dark:bg-gray-800 dark:bg-opacity-90 rounded-lg hover:bg-opacity-100 transition-opacity shadow-lg z-[30]",title:"Fullscreen",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})})})]})})});d.displayName="VideoPlayer";let m=(0,t.forwardRef)(({isLoaded:e,isMirrored:a=!1},l)=>{let[s,n]=(0,t.useState)(!1),i=()=>{n(!s)};return(0,r.jsx)("div",{className:s?"fixed inset-0 z-[70] bg-black flex items-center justify-center":"w-full max-w-6xl mx-auto",style:{display:e?s?"flex":"block":"none"},children:(0,r.jsxs)("div",{className:s?"w-full h-full flex items-center justify-center relative":"relative bg-black rounded-lg overflow-hidden aspect-video shadow-2xl flex items-center justify-center",children:[(0,r.jsx)("div",{ref:l,id:"youtube-player-container",className:`w-full h-full ${a?"scale-x-[-1]":""}`}),s&&(0,r.jsx)("button",{onClick:i,className:"absolute top-4 right-4 p-2 bg-surface-light bg-opacity-90 dark:bg-gray-800 dark:bg-opacity-90 rounded-lg hover:bg-opacity-100 transition-opacity shadow-lg z-[70]",title:"Exit Fullscreen",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"})})}),e&&!s&&(0,r.jsx)("button",{onClick:i,className:"absolute top-4 right-4 p-2 bg-surface-light bg-opacity-90 dark:bg-gray-800 dark:bg-opacity-90 rounded-lg hover:bg-opacity-100 transition-opacity shadow-lg z-[30]",title:"Fullscreen",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})})})]})})});function b(){let[e,b]=(0,l.useLocalStorage)({key:"player-settings",initialValue:i,validator:n}),g=(0,t.useMemo)(()=>({...i,...e}),[e]),y=(0,t.useCallback)(e=>{b("function"==typeof e?e(g):e)},[b,g]),[f,p]=(0,t.useState)(!1),[h,x]=(0,t.useState)(""),[v,k]=(0,t.useState)("audio"),[w,j]=(0,t.useState)(null),[N,S]=(0,t.useState)("file"),[E,C]=(0,t.useState)(""),L=(0,t.useRef)(null),R=(0,t.useRef)(null),T=(0,t.useRef)(null),F=(0,t.useRef)(null),P=(0,s.useWakeLock)(),[M,A]=(0,t.useState)(!0),Y=g.waitSec,U=g.isWaitEnabled,V=g.isLoop,W=g.intervalSec,I=g.fromSec,z=g.toSec,$=g.isRangeEnabled,B=g.playbackRate,q=g.isPlaybackRateEnabled,O=g.isMirrored,H=U?Y:0,D=$?I:null,Q=$?z:null,G=q?B:1,J=V&&0===W&&null===Q,[K,X]=(0,t.useState)(String(Y)),[_,Z]=(0,t.useState)(String(W)),[ee,er]=(0,t.useState)(null!==I?String(I):""),[et,ea]=(0,t.useState)(null!==z?String(z):""),[el,es]=(0,t.useState)(String(B));(0,t.useEffect)(()=>{X(String(Y))},[Y]),(0,t.useEffect)(()=>{Z(String(W))},[W]),(0,t.useEffect)(()=>{er(null!==I?String(I):"")},[I]),(0,t.useEffect)(()=>{ea(null!==z?String(z):"")},[z]),(0,t.useEffect)(()=>{es(String(B))},[B]);let en=(0,t.useRef)(f),ei=(0,t.useRef)(Y),eo=(0,t.useRef)(V),ec=(0,t.useRef)(W),eu=(0,t.useRef)(I);(0,t.useEffect)(()=>{en.current=f},[f]),(0,t.useEffect)(()=>{ei.current=H},[H]),(0,t.useEffect)(()=>{eo.current=V},[V]),(0,t.useEffect)(()=>{ec.current=W},[W]),(0,t.useEffect)(()=>{eu.current=D},[D]);let{count:ed,isCountingDown:em,startCountdown:eb,cancelCountdown:eg}=function(){let[e,r]=(0,t.useState)(0),[a,l]=(0,t.useState)(!1),s=(0,t.useRef)(null),n=(0,t.useRef)(null);(0,t.useEffect)(()=>()=>{s.current&&clearTimeout(s.current)},[]);let i=(0,t.useCallback)(()=>{s.current&&(clearTimeout(s.current),s.current=null),l(!1),r(0),n.current&&(n.current(),n.current=null)},[]);return{count:e,isCountingDown:a,startCountdown:(0,t.useCallback)(e=>e<=0?Promise.resolve():new Promise(t=>{l(!0),n.current=t;let a=Math.floor(e),i=()=>{if(r(a),a<=1){s.current=setTimeout(()=>{l(!1),r(0),n.current=null,t()},1e3);return}a--,s.current=setTimeout(i,1e3)};i()}),[]),cancelCountdown:i}}(),ey=function(e){let{audioRef:r,fromSec:a,toSec:l,playbackRate:s,useNativeLoop:n=!1,onEnd:i,onError:o}=e,[c,u]=(0,t.useState)(0),[d,m]=(0,t.useState)(0),[b,g]=(0,t.useState)(!1),[y,f]=(0,t.useState)(!1);(0,t.useEffect)(()=>{r.current&&(r.current.playbackRate=s)},[s,r]);let p=(0,t.useCallback)(()=>{if(!r.current)return;let e=r.current.currentTime;if(u(e),null!==a&&a>0&&e<a){r.current.currentTime=a;return}null!==l&&l>0&&e>=l&&(r.current.pause(),g(!1),i&&i())},[a,l,i,r]),h=(0,t.useCallback)(()=>{g(!1),i&&i()},[i]),x=(0,t.useCallback)(()=>{r.current&&(m(r.current.duration),f(!0),r.current.playbackRate=s)},[r,s]),v=(0,t.useCallback)(()=>{o&&o(Error("Failed to load audio file"))},[o]);(0,t.useEffect)(()=>{let e=r.current;if(e)return e.addEventListener("timeupdate",p),n||e.addEventListener("ended",h),e.addEventListener("loadedmetadata",x),e.addEventListener("error",v),()=>{e.removeEventListener("timeupdate",p),n||e.removeEventListener("ended",h),e.removeEventListener("loadedmetadata",x),e.removeEventListener("error",v)}},[p,h,x,v,r,n]);let k=(0,t.useCallback)(e=>{if(!r.current)return;if(!e.type.startsWith("audio/")){o&&o(Error("Please select an audio file"));return}let t=URL.createObjectURL(e);r.current.src=t,r.current.load()},[o,r]),w=(0,t.useCallback)(()=>{r.current&&y&&(r.current.play().catch(e=>{o&&o(e)}),g(!0))},[y,o,r]);return{currentTime:c,duration:d,isPlaying:b,isLoaded:y,useNativeLoop:n,loadAudioFile:k,play:w,pause:(0,t.useCallback)(()=>{r.current&&(r.current.pause(),g(!1))},[r]),reset:(0,t.useCallback)(()=>{if(!r.current)return;let e=null!==a&&a>0?a:0;r.current.currentTime=e,u(e)},[a,r])}}({audioRef:R,fromSec:D,toSec:Q,playbackRate:G,useNativeLoop:J,onEnd:async()=>{if(en.current){if(!eo.current){p(!1),A(!0);return}if(await eb(ec.current),en.current&&R.current){let e=null!==eu.current&&eu.current>0?eu.current:0;R.current.currentTime=e,R.current.play()}}},onError:e=>{x(`Error: ${e.message}`),p(!1)}}),ef=function(e){let{videoRef:r,fromSec:a,toSec:l,playbackRate:s,useNativeLoop:n=!1,onEnd:i,onError:o}=e,[c,u]=(0,t.useState)(0),[d,m]=(0,t.useState)(0),[b,g]=(0,t.useState)(!1),[y,f]=(0,t.useState)(!1);(0,t.useEffect)(()=>{r.current&&(r.current.playbackRate=s)},[s,r]);let p=(0,t.useCallback)(()=>{if(!r.current)return;let e=r.current.currentTime;if(u(e),null!==a&&a>0&&e<a){r.current.currentTime=a;return}null!==l&&l>0&&e>=l&&(r.current.pause(),g(!1),i&&i())},[a,l,i,r]),h=(0,t.useCallback)(()=>{g(!1),i&&i()},[i]),x=(0,t.useCallback)(()=>{r.current&&(m(r.current.duration),f(!0),r.current.playbackRate=s)},[r,s]),v=(0,t.useCallback)(()=>{o&&o(Error("Failed to load video file"))},[o]);(0,t.useEffect)(()=>{let e=r.current;if(e)return e.addEventListener("timeupdate",p),n||e.addEventListener("ended",h),e.addEventListener("loadedmetadata",x),e.addEventListener("error",v),()=>{e.removeEventListener("timeupdate",p),n||e.removeEventListener("ended",h),e.removeEventListener("loadedmetadata",x),e.removeEventListener("error",v)}},[p,h,x,v,r,n]);let k=(0,t.useCallback)(e=>{if(!r.current)return;if(!e.type.startsWith("video/")){o&&o(Error("Please select a video file"));return}let t=URL.createObjectURL(e);r.current.src=t,r.current.load()},[o,r]),w=(0,t.useCallback)(()=>{r.current&&y&&(r.current.play().catch(e=>{o&&o(e)}),g(!0))},[y,o,r]);return{currentTime:c,duration:d,isPlaying:b,isLoaded:y,useNativeLoop:n,loadVideoFile:k,play:w,pause:(0,t.useCallback)(()=>{r.current&&(r.current.pause(),g(!1))},[r]),reset:(0,t.useCallback)(()=>{if(!r.current)return;let e=null!==a&&a>0?a:0;r.current.currentTime=e,u(e)},[a,r])}}({videoRef:T,fromSec:D,toSec:Q,playbackRate:G,useNativeLoop:J,onEnd:async()=>{if(en.current){if(!eo.current){p(!1),A(!0);return}if(await eb(ec.current),en.current&&T.current){let e=null!==eu.current&&eu.current>0?eu.current:0;T.current.currentTime=e,T.current.play()}}},onError:e=>{x(`Error: ${e.message}`),p(!1)}}),ep=function({containerRef:e,fromSec:r,toSec:a,playbackRate:l,onEnd:s,onError:n}){let[i,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)(0),m=(0,t.useRef)(null),b=(0,t.useRef)(!1),g=(0,t.useRef)(null),y=(0,t.useRef)(!1);(0,t.useEffect)(()=>{o().catch(e=>{console.error("Failed to load YouTube IFrame API:",e),n(Error("Failed to load YouTube IFrame API"))})},[n]);let f=(0,t.useCallback)(async r=>{try{let t,a=(t=r.match(/(?:youtube\.com\/(?:watch\?v=|embed\/|v\/|shorts\/)|youtu\.be\/)([^"&?/\s]{11})/))?t[1]:null;if(!a)throw Error("Invalid YouTube URL");if(await o(),m.current&&(m.current.destroy(),m.current=null),y.current=!1,!e.current)throw Error("Container element not found");e.current.innerHTML="";let i=document.createElement("div");i.id="youtube-player",e.current.appendChild(i);let u=new window.YT.Player(i,{videoId:a,width:"100%",height:"100%",playerVars:{controls:1,modestbranding:1,rel:0,playsinline:1},events:{onReady:e=>{let r=e.target.getAvailablePlaybackRates();if(r.includes(l))e.target.setPlaybackRate(l);else if(r.length>0){let t=r.reduce((e,r)=>{let t=Math.abs(e-l),a=Math.abs(r-l);return t===a?Math.min(e,r):a<t?r:e});e.target.setPlaybackRate(t)}c(!0)},onStateChange:e=>{if(e.data===window.YT.PlayerState.ENDED)b.current=!1,s();else if(e.data===window.YT.PlayerState.PLAYING){if(b.current=!0,!y.current){y.current=!0;let r=e.target.getAvailableQualityLevels();console.warn("Available qualities on PLAYING:",r);let t="";for(let e of["highres","hd1080","hd720","large","medium","small"])if(r.includes(e)){t=e;break}if(t){let r=(r,a)=>{setTimeout(()=>{m.current&&(console.warn(`Attempt ${a}: Setting quality to ${t}`),e.target.setPlaybackQuality(t),setTimeout(()=>{let r=e.target.getPlaybackQuality();console.warn(`Attempt ${a}: Actual quality = ${r}`)},500))},r)};r(0,1),r(2e3,2),r(5e3,3)}}}else(e.data===window.YT.PlayerState.PAUSED||e.data===window.YT.PlayerState.UNSTARTED)&&(b.current=!1)},onError:e=>{let r={2:"Invalid video ID",5:"HTML5 player error",100:"Video not found",101:"Video not allowed to be played in embedded players",150:"Video not allowed to be played in embedded players"}[e.data]||"Unknown YouTube error";n(Error(r))}}});m.current=u}catch(e){console.error("Failed to load YouTube video:",e),n(e instanceof Error?e:Error("Failed to load YouTube video")),c(!1)}},[e,l,s,n]);(0,t.useEffect)(()=>{if(m.current&&i){let e=m.current.getAvailablePlaybackRates();if(e.includes(l))m.current.setPlaybackRate(l);else if(e.length>0){let r=e.reduce((e,r)=>{let t=Math.abs(e-l),a=Math.abs(r-l);return t===a?Math.min(e,r):a<t?r:e});m.current.setPlaybackRate(r)}}},[l,i]),(0,t.useEffect)(()=>{let e=()=>{if(!m.current||!b.current){g.current=requestAnimationFrame(e);return}try{let e=m.current.getCurrentTime();d(e),null!==a&&e>=a&&(m.current.pauseVideo(),b.current=!1,s())}catch{}g.current=requestAnimationFrame(e)};return g.current=requestAnimationFrame(e),()=>{null!==g.current&&cancelAnimationFrame(g.current)}},[a,s]);let p=(0,t.useCallback)(()=>{if(m.current&&i)try{m.current.playVideo(),b.current=!0}catch(e){console.error("Failed to play:",e)}},[i]),h=(0,t.useCallback)(()=>{if(m.current&&i)try{m.current.pauseVideo(),b.current=!1}catch(e){console.error("Failed to pause:",e)}},[i]),x=(0,t.useCallback)(()=>{if(m.current&&i)try{let e=null!==r&&r>0?r:0;m.current.seekTo(e,!0),d(e)}catch(e){console.error("Failed to reset:",e)}},[r,i]);return(0,t.useEffect)(()=>()=>{if(m.current){try{m.current.destroy()}catch{}m.current=null}null!==g.current&&cancelAnimationFrame(g.current)},[]),{isLoaded:i,currentTime:u,loadYouTubeVideo:f,play:p,pause:h,reset:x,useNativeLoop:!1}}({containerRef:F,fromSec:D,toSec:Q,playbackRate:G,useNativeLoop:J,onEnd:async()=>{if(en.current){if(!eo.current){p(!1),A(!0);return}await eb(ec.current),en.current&&(ep.reset(),ep.play())}},onError:e=>{x(`Error: ${e.message}`),p(!1)}}),eh="youtube"===v?ep:"video"===v?ef:ey,ex=(0,t.useCallback)(e=>{y(r=>({...r,waitSec:e}))},[y]),ev=(0,t.useCallback)(e=>{y(r=>({...r,isWaitEnabled:e}))},[y]),ek=(0,t.useCallback)(e=>{y(r=>({...r,isLoop:e}))},[y]),ew=(0,t.useCallback)(e=>{y(r=>({...r,intervalSec:e}))},[y]),ej=(0,t.useCallback)(e=>{y(r=>({...r,fromSec:e}))},[y]),eN=(0,t.useCallback)(e=>{y(r=>({...r,toSec:e}))},[y]),eS=(0,t.useCallback)(e=>{y(r=>({...r,playbackRate:e}))},[y]),eE=(0,t.useCallback)(e=>{y(r=>({...r,isRangeEnabled:e}))},[y]),eC=(0,t.useCallback)(e=>{y(r=>({...r,isPlaybackRateEnabled:e}))},[y]),eL=(0,t.useCallback)(e=>{y(r=>({...r,isMirrored:e}))},[y]),eR=(0,t.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),y(e=>({...e,fromSec:null,toSec:null}))},[y]);(0,t.useEffect)(()=>{w&&("video"===v?(ef.loadVideoFile(w),x("Video file loaded")):(ey.loadAudioFile(w),x("Audio file loaded")),j(null))},[w,v,ey,ef]),(0,t.useEffect)(()=>{g.youtubeUrl&&C(g.youtubeUrl)},[g.youtubeUrl]);let eT=async()=>{if(!E.trim())return void x("Please enter a YouTube URL");try{x("Loading YouTube video..."),await ep.loadYouTubeVideo(E),k("youtube"),x("YouTube video loaded"),y(e=>({...e,youtubeUrl:E}))}catch(e){x(`Error: ${e instanceof Error?e.message:"Failed to load YouTube video"}`)}},eF=async()=>{eh.isLoaded?(p(!0),A(!1),x("Playing..."),await P.request(),await eb(ei.current),en.current&&(eh.reset(),eh.play())):x("Please select a media file first")},eP=async()=>{p(!1),eh.pause(),eh.reset(),eg(),x(""),A(!0),await P.release()},eM=()=>{A(!M)},eA=async()=>{eg(),p(!1),eh.pause(),eh.reset(),A(!0),await P.release()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.default,{isOpen:M,onClose:()=>{A(!1)},onToggle:eM,title:"Player Settings",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[!f&&(0,r.jsx)("button",{type:"button",onClick:eF,disabled:!eh.isLoaded,className:"w-full px-4 py-3 bg-primary text-white rounded-lg hover:bg-primary-hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:"Start"}),f&&(0,r.jsx)("button",{type:"button",onClick:eP,className:"w-full px-4 py-3 bg-danger text-white rounded-lg hover:bg-danger-hover transition-colors font-medium",children:"Stop"})]}),(0,r.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>S("file"),disabled:f,className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-colors disabled:opacity-50 ${"file"===N?"bg-primary text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:"File"}),(0,r.jsx)("button",{type:"button",onClick:()=>S("youtube"),disabled:f,className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-colors disabled:opacity-50 ${"youtube"===N?"bg-primary text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:"YouTube"})]}),"file"===N&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"file",className:"block text-sm font-medium",children:"Media File"}),(0,r.jsx)("input",{ref:L,type:"file",id:"file",onChange:e=>{let r=e.target.files?.[0];if(!r)return;let t="audio";r.type.startsWith("video/")?t="video":r.type.startsWith("audio/")?t="audio":["mp4","webm","ogg","mov","avi","mkv"].includes(r.name.split(".").pop()?.toLowerCase()||"")&&(t="video"),k(t),j(r)},disabled:f,className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-surface-light dark:bg-gray-700 disabled:opacity-50 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-primary file:text-white hover:file:bg-primary-hover"})]}),"youtube"===N&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"youtube-url",className:"block text-sm font-medium",children:"YouTube URL"}),(0,r.jsx)("input",{type:"text",id:"youtube-url",value:E,onChange:e=>C(e.target.value),disabled:f,placeholder:"https://www.youtube.com/watch?v=...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-surface-light dark:bg-gray-700 disabled:opacity-50"}),(0,r.jsx)("button",{type:"button",onClick:eT,disabled:f||!E.trim(),className:"w-full px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:"Load"})]}),("video"===v||"youtube"===v)&&(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:O,onChange:e=>eL(e.target.checked),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Mirror (Flip Horizontally)"})]})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:U,onChange:e=>ev(e.target.checked),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Wait"})]}),U&&(0,r.jsxs)("div",{className:"flex items-center gap-2 ml-6",children:[(0,r.jsx)("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*\\.?[0-9]*",id:"wait",value:K,onChange:e=>{X(e.target.value)},onBlur:()=>{let e=parseFloat(K);""===K||isNaN(e)||e<0||e>60?ex(0):ex(e)},className:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-surface-light dark:bg-gray-700",placeholder:"0"}),(0,r.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"sec"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:V,onChange:e=>ek(e.target.checked),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Loop"})]}),V&&(0,r.jsxs)("div",{className:"ml-6",children:[(0,r.jsx)("label",{htmlFor:"interval",className:"block text-sm font-medium mb-2",children:"Interval"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*\\.?[0-9]*",id:"interval",value:_,onChange:e=>{Z(e.target.value)},onBlur:()=>{let e=parseFloat(_);""===_||isNaN(e)||e<0||e>60?ew(0):ew(e)},className:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-surface-light dark:bg-gray-700",placeholder:"0"}),(0,r.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"sec"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:$,onChange:e=>eE(e.target.checked),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Range"})]}),$&&(0,r.jsxs)("div",{className:"ml-6 space-y-2",children:[(0,r.jsx)("div",{className:"flex items-center justify-between",children:(null!==I||null!==z)&&(0,r.jsx)("button",{type:"button",onClick:eR,className:"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 underline transition-colors ml-auto",children:"Reset"})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{htmlFor:"from",className:"block text-xs text-gray-600 dark:text-gray-400",children:"From"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*\\.?[0-9]*",id:"from",value:ee,onChange:e=>{er(e.target.value)},onBlur:()=>{if(""===ee)ej(null);else{let e=parseFloat(ee);isNaN(e)||e<0?ej(null):ej(e)}},placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-surface-light dark:bg-gray-700"}),(0,r.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"s"})]}),eh.isLoaded&&(0,r.jsxs)("button",{type:"button",onClick:()=>ej(Math.floor(10*eh.currentTime)/10),className:"w-full px-2 py-1 text-xs bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:["Set Current (",Math.floor(10*eh.currentTime)/10,"s)"]})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{htmlFor:"to",className:"block text-xs text-gray-600 dark:text-gray-400",children:"To"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*\\.?[0-9]*",id:"to",value:et,onChange:e=>{ea(e.target.value)},onBlur:()=>{if(""===et)eN(null);else{let e=parseFloat(et);isNaN(e)||e<0?eN(null):eN(e)}},placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-surface-light dark:bg-gray-700"}),(0,r.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"s"})]}),eh.isLoaded&&(0,r.jsxs)("button",{type:"button",onClick:()=>eN(Math.floor(10*eh.currentTime)/10),className:"w-full px-2 py-1 text-xs bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:["Set Current (",Math.floor(10*eh.currentTime)/10,"s)"]})]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:q,onChange:e=>eC(e.target.checked),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Playback Rate"})]}),q&&(0,r.jsxs)("div",{className:"ml-6 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*\\.?[0-9]*",id:"rate",value:el,onChange:e=>{es(e.target.value)},onBlur:()=>{let e=parseFloat(el);""===el||isNaN(e)||e<.25||e>2?eS(1):eS(e)},className:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-surface-light dark:bg-gray-700",placeholder:"1.0"}),(0,r.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"×"})]}),(0,r.jsx)("input",{type:"range",id:"rate-range",min:"0.25",max:"2.0",step:"0.05",value:B,onChange:e=>eS(parseFloat(e.target.value)),className:"w-full accent-primary-light dark:accent-primary-dark"}),(0,r.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[(0,r.jsx)("span",{children:"0.25×"}),(0,r.jsx)("span",{children:"0.5×"}),(0,r.jsx)("span",{children:"1.0×"}),(0,r.jsx)("span",{children:"1.5×"}),(0,r.jsx)("span",{children:"2.0×"})]})]})]}),h&&(0,r.jsx)("div",{className:"p-3 bg-gray-100 dark:bg-gray-700 rounded-lg",children:(0,r.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:h})})]})}),(0,r.jsxs)("main",{className:"min-h-screen flex flex-col items-center justify-center p-4 pt-20 lg:pt-4",children:[(0,r.jsxs)("div",{className:"w-full max-w-6xl space-y-4",children:[(0,r.jsx)("div",{className:"audio"===v?"":"hidden",children:(0,r.jsx)(u,{ref:R,isLoaded:ey.isLoaded,loop:ey.useNativeLoop})}),(0,r.jsx)("div",{className:"video"===v?"":"hidden",children:(0,r.jsx)(d,{ref:T,isLoaded:ef.isLoaded,loop:ef.useNativeLoop,isMirrored:O})}),(0,r.jsx)("div",{className:"youtube"===v?"":"hidden",children:(0,r.jsx)(m,{ref:F,isLoaded:ep.isLoaded,isMirrored:O})}),!eh.isLoaded&&"youtube"!==v&&(0,r.jsxs)("div",{onClick:eM,className:"relative bg-black rounded-lg overflow-hidden aspect-video shadow-2xl flex flex-col items-center justify-center cursor-pointer hover:bg-gray-900 transition-colors",children:[(0,r.jsx)("h1",{className:"text-white text-5xl font-bold mb-4",children:"Player"}),(0,r.jsx)("p",{className:"text-white text-lg",children:"Select a media file to begin"})]})]}),(0,r.jsx)(c,{count:ed,isVisible:em,onClick:eA})]})]})}function g(){return(0,r.jsx)(t.Suspense,{fallback:(0,r.jsx)("div",{children:"Loading..."}),children:(0,r.jsx)(b,{})})}m.displayName="YouTubePlayer",e.s(["default",()=>g],90417)}]);